<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="home-screen">
  <template>
    <link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
	<iron-ajax auto
	    id="currentu"
		url='/api/currentuser'
		last-response="{{currentuser}}"
		handleAs="json"
	    debounce-duration="300">
	</iron-ajax>

  	<link rel="stylesheet" href="../../css/enquetepage.css">
  	<link rel="stylesheet" href="../../css/ionicons.min.css">
  	<link rel="import" href="../../bower_components/font-roboto/roboto.html">
  	<link rel="import" href="../../bower_components/iron-flex-layout/classes/iron-flex-layout.html">
  	<link rel="import" href="../../bower_components/iron-fit-behavior/iron-fit-behavior.html">
    <link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">

	<style is="custom-style">
	    :root{
	    	--paper-input-container-color: white;
	    	--paper-input-container-focus-color: white;
	    	--paper-input-container-input-color: white;

	    }
  	</style>

    <!-- <paper-drawer-panel> -->
    	<!-- <div class="flex" drawer>
    	</div> -->
		<!-- <div main> -->
		<div class="vertical layout background fit" on-scroll="updateSidePanelPos">
    		<div class="vertical layout">
		    	<div class="horizontal layout">
		    		<div class="organisationPanel">
		    			<span class="organisationText">Mediaprofiel</span>
		    		</div>
				    <div class="flex"></div>
				    <div class="vertical layout settingsPanel">
				    	<div class="horizontal layout  center">
					    	<div class="switchContainer horizontal layout center">
					    		<div id="leftTab" class="tabActivated" on-click="switchRight">
					    			<span>vragenlijsten</span>
					    		</div>
					    		<div id="rightTab" class="tab" on-click="switchLeft">
					    			<span>profielpagina</span>
					    		</div>
					    	</div>
					    	<div class="settingsContainer horizontal layout">
						    	<span class="menuIcon" on-click="openOverlay"></span>
					    	</div>
					    </div>
				    </div>
				</div>

				<div class="horizontal layout">
					<div class="flex" style="height: 270px;"></div>
					<div class="vertical layout changeMenuPanel" id="overlay" style="display: none;">
						<p class="menuChangeTitleText">Verander wachtwoord</p>
						<link rel="import" href="../../bower_components/paper-input/paper-input.html">
						<paper-input style="width:180px; margin: 0px 15px 0px 15px;" label="Nieuw wachtwoord" type="password"></paper-input>
						<paper-input style="width:180px; margin: 0px 15px 0px 15px;" label="Bevestig wachtwoord" type="password"></paper-input>
						<link rel="import" href="../jr-button-outline/jr-button-outline-w.html">
						<div class="vertical layout center">
							<div class="horizontal layout center">
								<jr-button-outline-w icon="done" on-click=""></jr-button-outline-w>
				    			<jr-button-outline-w icon="done" on-click=""></jr-button-outline-w>
			    			</div>	

			    			<span class="seperatorTop"></span>

			    			<div class="horizontal layout center flex" style="cursor: pointer;" on-click="logout">
			    				<p class="menuChangeButtonText">log out</p>
			    			</div>	
			    		</div>

					</div>
				</div>
			</div>
			<div class="vertical layout fit" style="position: absolute; top:225px;">
				<link rel="import" href="../../bower_components/neon-animation/neon-animated-pages.html">
				<link rel="import" href="../../bower_components/neon-animation/neon-animations.html">

				<neon-animated-pages id="pages" class="flex"  selected="0" entry-animation="[[entryAnimation]]" exit-animation="[[exitAnimation]]">
			    	<div>		    	
					    <link rel="import" href="enquete-page.html">
					    <enquete-page id="enquetePage"></enquete-page>
					</div>

					<div>
						<link rel="import" href="profile-page.html">
						<profile-page></profile-page>
					</div>
				</neon-animated-pages>
			</div>
    	</div>	    
	<!-- </paper-drawer-panel> -->
  </template>

</dom-module>
<script>
  Polymer({
    is: "home-screen",

    switchRight: function() {
	    this.entryAnimation = 'slide-from-left-animation';
        this.exitAnimation = 'slide-right-animation';
	    this.$.pages.selected = "0";
	    this.$.leftTab.className = "tabActivated";
	    this.$.rightTab.className = "tab";
	},
	switchLeft: function() {
	    this.entryAnimation = 'slide-from-right-animation';
        this.exitAnimation = 'slide-left-animation';
	    this.$.pages.selected = "1";
	    this.$.leftTab.className = "tab";
	    this.$.rightTab.className = "tabActivated";
	},

	updateSidePanelPos: function(){
		var sp = document.getElementById("sidePanel");
		var en = document.getElementById("enquete");

		var sp2 = document.getElementById("sidePPanel");

		var bg = document.querySelector(".background");

		sp.style.top = (parseFloat(en.style.top) + parseFloat(bg.scrollTop)).toString() + "px";
		sp2.style.marginTop = parseFloat(bg.scrollTop).toString() + "px";
	},

	openOverlay: function(){
		if(document.getElementById("overlay").style.display == 'block')
		{
			document.getElementById("overlay").style.display = "none";
			document.querySelector(".menuIcon").innerHTML =  ""
		}
		else{
			document.getElementById("overlay").style.display = "block";
			document.querySelector(".menuIcon").innerHTML =  ""
		}
	},
	changePassword: function(){
        pw1 = this.$.password1.value;
        pw2 = this.$.password2.value;
        if (pw1 != pw2) {
          this.passwordErrors = "Wachtwoorden komen niet overeen."
          this.$.password1.value = "";
          this.$.password2.value = "";
          this.$.dec1.updateLabelVisibility();
          this.$.dec2.updateLabelVisibility();
        }
        else{
          data = JSON.stringify({"password": pw1});
          this.$.postPassword.body = data;
          this.$.postPassword.go();
          
        }

      },
      logout: function(){
      	window.location.replace("/logout");
      }
  });

</script>